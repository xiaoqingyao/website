<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="ControlManageEdit.aspx.cs" ValidateRequest="false"  Inherits="KingTop.Web.Admin.ControlManageEdit" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<title>模型编辑页</title>
    <script src="../JS/jquery-3.2.min.js" type="text/javascript"></script>
    <script src="../JS/jquery-validationEngine.js" type="text/javascript"></script>
     <script type="text/javascript" src="../js/jquery-validationEngine-cn.js"></script>
    <script src="../Calendar/WdatePicker.js" type="text/javascript"></script>
    <script type="text/javascript" src="../Editor/ckeditor/ckeditor.js"></script>
    <script src="../ColorPicker/dhtmlxcommon.js" type="text/javascript"></script>
    <script src="../ColorPicker/colorpicker.js" type="text/javascript"></script> 
    <script type="text/javascript" src="../js/jquery.ui.form.select.js"></script>
    <script type="text/javascript" src="../js/public.js"></script>
    <script type="text/javascript" src="../js/jquery.dialog.js"></script>
    <script type="text/javascript" src="../js/win.js"></script>
    <script src="../JS/publicform.js" type="text/javascript"></script>

    <script src="../JS/jquery.ui.draggable.js" type="text/javascript"></script>
   <script src="../JS/Common.js" type="text/javascript"></script>
    <script src="../JS/ControlManageEdit.js" type="text/javascript"></script>
    <script src="../JS/ModelFieldAlbums.js" type="text/javascript"></script>
    
    <script type="text/javascript">$(document).ready(function() { $("#theForm").validationEngine({ promptPosition: "centerRight" }) });</script>
    
    <link href="../CSS/validationEngine.css" rel="stylesheet" type="text/css" />
    <link href="../ColorPicker/colorpicker.css" rel="stylesheet" type="text/css" />
    <link href="../Editor/ckeditor/content.css" rel="stylesheet" type="text/css" />
    <link href="../CSS/public.css" rel="stylesheet" type="text/css" />
    <link href="../css/dialog.css" rel="stylesheet" type="text/css" />
    <link href="../css/ustyle.css" rel="stylesheet" type="text/css" />
      
 </head>
 <body>
 <form id="theForm" runat="server">
<input type="hidden" id="hdnUploadImgUrl" value="<%=GetUploadImgUrl() %>" />
<input type="hidden" id="hdnUploadImgPath" value="<%=GetUploadImgSetParam()[1] %>" />
<input type="hidden" id="hdnRSID" value="<%=Request.QueryString["ID"]%>" />
 <asp:hiddenfield ID="hdnNodeID"  runat="server"/>
<asp:hiddenfield ID="hdnSiteID"  runat="server"/>
<asp:HiddenField ID="hdnActionType" runat="server" />
<asp:hiddenfield ID="hdnBackUrlParam"  runat="server"/>
<input type="hidden" id="hdnCreateHtmlRighte" value="<%=isHasCreateHtmlRight %>" />
<div class="container">
 <h4>位置：  <%GetPageNav(NodeCode);%> > <span id="CurrentOpNavName"></span></h4> 
<div id="panel"><dl><dt>所属节点</dt><dd><input type="text" name="HQB_NodeID" readonly="readonly" style="cursor:text; width:300px;" class="validate[required]" value="<%=hsFieldValue["NodeName"] %>" onclick="OpenShowSiteNode(1)" id="HQB_NodeID" />
<input type="button" value="更换节点" onclick="OpenShowSiteNode(1)" />
<input type="button" value="添加至其它节点" onclick="OpenShowSiteNode(0)" id="btnAddToOtherNode" runat="server" />
<ul id="HQB_SiteNode_Container" style="float:none;"></ul></dd></dl><dl><dt>软件名称</dt><dd><input type="text" style="width:300px;" class="validate[required]" name="Title" value="<%=hsFieldValue["Title"] %>" id="Title" />
<span style="color:#ff0000;"> * </span>
<input type="button" value="检测是否具有重复" id="CheckTitleISRepeat" onclick="CheckTitleRepeat('K_U_DownLoad','Title','CheckTitleISRepeatMSG')" />
<span style="color:#ff0000;" id="CheckTitleISRepeatMSG"></span></dd></dl><dl><dt>软件类型</dt><dd><select  id="SoftType" name="SoftType"><option  <%if(hsFieldValue["SoftType"] != null && hsFieldValue["SoftType"].ToString().Contains("国产软件")) {Response.Write("selected='selected'");}%> value="国产软件">国产软件</option><option  <%if(hsFieldValue["SoftType"] != null && hsFieldValue["SoftType"].ToString().Contains("国外软件")) {Response.Write("selected='selected'");}%> value="国外软件">国外软件</option><option  <%if(hsFieldValue["SoftType"] != null && hsFieldValue["SoftType"].ToString().Contains("汉化补丁")) {Response.Write("selected='selected'");}%> value="汉化补丁">汉化补丁</option><option  <%if(hsFieldValue["SoftType"] != null && hsFieldValue["SoftType"].ToString().Contains("程序源码")) {Response.Write("selected='selected'");}%> value="程序源码">程序源码</option><option  <%if(hsFieldValue["SoftType"] != null && hsFieldValue["SoftType"].ToString().Contains("其他")) {Response.Write("selected='selected'");}%> value="其他">其他</option></select></dd></dl><dl><dt>软件语言</dt><dd><select  id="SoftLang" name="SoftLang"><option  <%if(hsFieldValue["SoftLang"] != null && hsFieldValue["SoftLang"].ToString().Contains("英文")) {Response.Write("selected='selected'");}%> value="英文">英文</option><option  <%if(hsFieldValue["SoftLang"] != null && hsFieldValue["SoftLang"].ToString().Contains("简体中文")) {Response.Write("selected='selected'");}%> value="简体中文">简体中文</option><option  <%if(hsFieldValue["SoftLang"] != null && hsFieldValue["SoftLang"].ToString().Contains("繁体中文")) {Response.Write("selected='selected'");}%> value="繁体中文">繁体中文</option><option  <%if(hsFieldValue["SoftLang"] != null && hsFieldValue["SoftLang"].ToString().Contains("简繁中文")) {Response.Write("selected='selected'");}%> value="简繁中文">简繁中文</option><option  <%if(hsFieldValue["SoftLang"] != null && hsFieldValue["SoftLang"].ToString().Contains("多国语言")) {Response.Write("selected='selected'");}%> value="多国语言">多国语言</option><option  <%if(hsFieldValue["SoftLang"] != null && hsFieldValue["SoftLang"].ToString().Contains("其他语言")) {Response.Write("selected='selected'");}%> value="其他语言">其他语言</option></select></dd></dl><dl><dt>软件授权形式</dt><dd><select  id="Authorization" name="Authorization"><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("免费版")) {Response.Write("selected='selected'");}%> value="免费版">免费版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("共享版")) {Response.Write("selected='selected'");}%> value="共享版">共享版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("试用版")) {Response.Write("selected='selected'");}%> value="试用版">试用版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("演示版")) {Response.Write("selected='selected'");}%> value="演示版">演示版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("注册版")) {Response.Write("selected='selected'");}%> value="注册版">注册版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("破解版")) {Response.Write("selected='selected'");}%> value="破解版">破解版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("零售版")) {Response.Write("selected='selected'");}%> value="零售版">零售版</option><option  <%if(hsFieldValue["Authorization"] != null && hsFieldValue["Authorization"].ToString().Contains("OEM版")) {Response.Write("selected='selected'");}%> value="OEM版">OEM版</option></select></dd></dl><dl><dt>软件平台</dt><dd><input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("WinXP")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="WinXP" />WinXP<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Vista")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Vista" />Vista<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Win2000")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Win2000" />Win2000<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Win2003")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Win2003" />Win2003<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Win2008")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Win2008" />Win2008<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Win7")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Win7" />Win7<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Unix")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Unix" />Unix<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("Linux")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="Linux" />Linux<input <%if(hsFieldValue["RunSystem"] != null && hsFieldValue["RunSystem"].ToString().Contains("MacOS")) {Response.Write("checked='checked'");}%> type="checkbox" name="RunSystem" value="MacOS" />MacOS</dd></dl><dl><dt>版本号</dt><dd><input  class="validate[optional]"  type="text" value="<%=hsFieldValue["FilesVer"]%>" style="width:120px;"  maxlength="30" name="FilesVer" id="FilesVer" /></dd></dl><dl><dt>软件截图</dt><dd><input   type="text" value="<%=hsFieldValue["SmallImg"]%>" style="width:300px;"  maxlength="" name="SmallImg" id="SmallImg" /> <input type='button' onclick="InputImages('theForm', 'SmallImg', 1, '', 4096, '',125,125)" value = '上传图片' /></dd></dl><dl><dt>上传软件文件</dt><dd><style  type="text/css">.HQB_MultiFile_ButtonList input{margin-bottom:5px;}</style><table  class="HQB_MultiFile_ButtonList"><tr><td valign="top"><ul style="list-style:none; padding::0; margin:0; "><li style="margin:0; padding:0;margin-bottom:5px;"><input type="hidden" id="UploadFiles" value="<%=hsFieldValue["UploadFiles"]%>" name="UploadFiles" /><select style=" width:400px; height:132px;" name="HQB_MultiFile_UploadFiles" multiple="multiple" id="HQB_MultiFile_UploadFiles" ondblclick="return MultiFileItemModify('HQB_MultiFile_UploadFiles','UploadFiles')" onchange="MultiFileSynchronousHideValue('HQB_MultiFile_UploadFiles','UploadFiles')"></select></li><li style="margin:0; padding:0; display:block;"><input type='button' onclick="InputFile('theForm','HQB_MultiFile_UploadFiles','file',2,'',40960,'UploadFiles')" value = '上传文件...' /></li></ul></td><td valign="top"><input type="button" onclick="MultiFileItemAdd('HQB_MultiFile_UploadFiles','UploadFiles')" value="添加外部地址" /><br /><input type="button" value="修改选中" onclick="MultiFileItemModify('HQB_MultiFile_UploadFiles','UploadFiles')" /><br /><input type="button" value="删除选中" onclick="MultiFileItemDel('HQB_MultiFile_UploadFiles','UploadFiles')"/><br /><input type="button" value="向上移动" onclick="UpOrder('HQB_MultiFile_UploadFiles')" /><br /><input type="button" value="向下移动" onclick="DownOrder('HQB_MultiFile_UploadFiles')" /></td></tr></table><script type="text/javascript">MultiFileInit('HQB_MultiFile_UploadFiles','UploadFiles')</script><span style="color:#ff0000; font-size:14px; font-weight:bold;">*</span></dd></dl><dl><dt>关键字</dt><dd><input  class="validate[optional]"  type="text" value="<%=hsFieldValue["Keyword"]%>" style="width:300px;"  maxlength="128" name="Keyword" id="Keyword" />多个关键字请用“,”隔开，方便搜索</dd></dl><dl><dt>简介</dt><dd><textarea style="height:80px;width:500px;"   class="validate[optional]"  id="Intro"  name="Intro"><%=hsFieldValue["Intro"]%></textarea>500字符以内，注：1个汉字等于2个字符</dd></dl><%KingTop.Config.UploadConfig uploadobj = KingTop.Config.Upload.GetConfig(GetUploadImgPath); %><dl><dt>软件说明</dt><dd><textarea  id="Content" name="Content"><%=hsFieldValue["Content"]%></textarea><script type="text/javascript">var Content$$ckeditor$$obj = CKEDITOR.replace('Content', { linkUploadAllowedExtensions: '<%=uploadobj.UploadFilesType %>', nodeId: 1,language:'<%=Resources.Model.DateLang%>', watermark: false, height: '300px', toolbar: 'ContentFull', modelId: 1, flashUploadAllowedExtensions: '<%=uploadobj.UploadMediaType %>', width: '680px', imageUploadAllowedExtensions: '<%=uploadobj.UploadImageType %>', skin: 'blue', thumbnail: false, fileRecord: true, fieldName: 'Content', wordPic: false, flashUpload: true, imageUpload: true, linkUpload: true, foreground: false, moduleName: '' }); </script></dd></dl><dl><dt>搜索关键字</dt><dd><textarea style="height:40px;width:500px;"   class="validate[optional]"  id="MetaKeyword"  name="MetaKeyword"><%=hsFieldValue["MetaKeyword"]%></textarea>用于搜索</dd></dl><dl><dt>页面描述</dt><dd><textarea style="height:40px;width:500px;"   class="validate[optional]"  id="MetaDescript"  name="MetaDescript"><%=hsFieldValue["MetaDescript"]%></textarea>页面描述字段</dd></dl><dl><dt>发布时间</dt><dd><input id="PubDate"  value="<%if(hsFieldValue["PubDate"].ToString().Equals("DateTime.Now.ToString('yyyy-MM-dd HH:mm:ss')")){Response.Write(DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss"));}else{Response.Write(string.Format("{0:yyyy-MM-dd HH:mm:ss}",hsFieldValue["PubDate"]));}%>"   name="PubDate" style="width:200px;"  class="Wdate" type="text" onFocus="WdatePicker({lang:'<%=Resources.Model.DateLang%>',skin:'whyGreen',dateFmt:'yyyy-MM-dd HH:mm:ss'})"/></dd></dl><dl><dt>是否生成静态文件</dt><dd><input  type="radio" <%if(hsFieldValue["IsHtml"] != null && hsFieldValue["IsHtml"].ToString().Contains("1")) {Response.Write("checked='checked'");}%>  name="IsHtml" value="1" />是<input  type="radio" <%if(hsFieldValue["IsHtml"] != null && hsFieldValue["IsHtml"].ToString().Contains("0")) {Response.Write("checked='checked'");}%>  name="IsHtml" value="0" />否</dd></dl><dl><dt>是否启用</dt><dd><input  type="radio" <%if(hsFieldValue["IsEnable"] != null && hsFieldValue["IsEnable"].ToString().Contains("1")) {Response.Write("checked='checked'");}%>  name="IsEnable" value="1" />是<input  type="radio" <%if(hsFieldValue["IsEnable"] != null && hsFieldValue["IsEnable"].ToString().Contains("0")) {Response.Write("checked='checked'");}%>  name="IsEnable" value="0" />否</dd></dl></div>
<div class="Submit" id="HQB_Operation_Button">
 <asp:Button ID="btnModelManageEdit" OnClick="Edit"  runat="server" />
 <input type="button" value="返回" onclick="back()" />
 </div>
</div>
 <asp:HiddenField ID="hdnFieldFromUrlParamValue" runat="server" Value="" /><asp:hiddenfield ID="hdnNodeCode" runat="server"/><asp:HiddenField Value="K_U_DownLoad" ID="hdnTableName" runat="server" /><asp:HiddenField Value="Title||0,SoftType|国产软件|6,SoftLang|简体中文|6,Authorization|免费版|6,RunSystem|Vista|5,FilesVer||1,SmallImg||11,UploadFiles||12,Keyword||1,Intro||2,Content||3,MetaKeyword||2,MetaDescript||2,PubDate|DateTime.Now.ToString('yyyy-MM-dd HH:mm:ss')|10,IsHtml|1|4,IsEnable|1|4," ID="hdnFieldValue" runat="server" /><asp:HiddenField ID="hdnModelID" Value="100000040333728" runat="server" /><input type="hidden" id="hdnModelAlias" value="下载模型" name="hdnModelAlias"/> 
<script type="text/javascript"><%=jsMessage %></script>
 </form>
 </body>
 </html>